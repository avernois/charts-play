<!DOCTYPE htmlC>
<html>
  <head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="dark-unica.js"></script>

    <script>

    $(document).ready(function() {

      var delay = window.location.hash.substring(1);

      var options = {
        title: {
                text: 'Temperature'
            },
        chart: {
            renderTo: 'chart',
            type: 'spline'
        },
        xAxis: {
                type: 'datetime'
        },
        yAxis: [{
                  title: {
                    text: 'Temp'
                  }
                }],
        tooltip: {
                    borderWidth: 0,
                    backgroundColor: 'none',
                    formatter: function() {
                              return  '<b>' + Highcharts.numberFormat(this.y, 1) + 'Â°C' + '</b><br> ' +
                                              Highcharts.dateFormat('%d %b %H:%M', this.x);
                    },
                    headerFormat: '',
                    shadow: false,
                    style: {
                      fontSize: '18px'
                    }                   
                  },
        series: [{
                    name: "indoor",
                    data: [],
                    lineWidth: 0,
                    marker: {
                      enabled: true,
                      radius: 2
                    },
                    states: {
                      hover: {
                        lineWidthPlus: 0
                      }
                    }
                  },
                  {
                    name: "Outdoor",
                    data: [],
                    lineWidth: 0,
                    marker: {
                      enabled: true,
                      radius: 2
                    },
                    states: {
                      hover: {
                        lineWidthPlus: 0
                      }
                    }
                  }]
      };

      var public_key = "7J0m54KX9dSllLJA0qg2";
      var jsonData = $.ajax({
          url: 'https://data.sparkfun.com/output/' + public_key + '.json',
          data: {'gte' : {'timestamp' : 'now - ' + delay + ' days'}},
          dataType: 'jsonp',
      }).done(function (results) {
          $.each(results, function (i, row) {
            date = Date.parse(row.timestamp);
            options.series[0].data.unshift([date, parseFloat(row.inside)]);
            options.series[1].data.unshift([date, parseFloat(row.outside)]);
          });
          var chart = new Highcharts.Chart(options);
        });
    });
    </script>

  </head>
  <body bgcolor="#3e3e40">
    <div id="chart" style="width: 100%;"></div>
  </body>
</html>

